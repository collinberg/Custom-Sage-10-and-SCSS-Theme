import { __decorate, __metadata } from "tslib";
import { Extension } from '@roots/bud-framework/extension';
import { bind, label } from '@roots/bud-framework/extension/decorators';
/**
 * This is the extension that enables hot module replacement in `development` mode
 *
 * @public
 * @decorator `@label`
 * @decorator `@plugin`
 * @decorator `@development`
 */
let BudHMR = class BudHMR extends Extension {
    async make(bud) {
        const { HotModuleReplacementPlugin } = await this.import(`@roots/bud-support/webpack`);
        return new HotModuleReplacementPlugin();
    }
    async when(bud) {
        if (bud.isProduction)
            return false;
        if (bud.isCLI() && bud.context.args.hot === false)
            return false;
        return true;
    }
};
__decorate([
    bind,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Function]),
    __metadata("design:returntype", Promise)
], BudHMR.prototype, "make", null);
__decorate([
    bind,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Function]),
    __metadata("design:returntype", Promise)
], BudHMR.prototype, "when", null);
BudHMR = __decorate([
    label(`@roots/bud-extensions/webpack-hot-module-replacement-plugin`)
], BudHMR);
export default BudHMR;
//# sourceMappingURL=index.js.map